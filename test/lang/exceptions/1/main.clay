import printer.(println);

instance Exception (Int);

record Test (
    x: Int32
);

override Test() = Test(-1);

override Test(x:Int32) --> returned:Test {
    println("Created ", x);
    returned.x = x;
}

override Test(other:Test) --> returned:Test {
    println("Copied ", other.x);
    returned.x = other.x;
}

override destroy(t:Test) {
    println("Destroyed ", t.x);
}

main () {
    try {
        var a = Test(1);
        if (true)
            throw 1;
        var b = Test(2);
    }
    catch (e) {
        println("Caught!");
    }
}
