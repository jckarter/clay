import printer.(println);

record Foo ();

var dummy = 10;

override index(x:Foo, index) = ref dummy;
override staticIndex(x:Foo, index) = ref dummy;
override fieldRef(x:Foo, field) = ref dummy;

override indexAssign(x:Foo, index, value) {
    println("indexAssign(x, ", index, ", ", value, ")");
}

override indexUpdateAssign(op, x:Foo, index, ..args) {
    println("indexUpdateAssign(", ..weaveValues(", ",op,"x",index,..args), ")");
}

[i]
override staticIndexAssign(x:Foo, #i, value) {
    println("staticIndexAssign(x, ", i, ", ", value, ")");
}

[i]
override staticIndexUpdateAssign(op, x:Foo, #i, value) {
    println("staticIndexUpdateAssign(", op, ", x, ", i, ", ", value, ")");
}

[FIELD]
override fieldRefAssign(x:Foo, #FIELD, value) {
    println("fieldRefAssign(x, ", FIELD, ", ", value, ")");
}

[FIELD]
override fieldRefUpdateAssign(op, x:Foo, #FIELD, value) {
    println("fieldRefUpdateAssign(", op, ", x, ", FIELD, ", ", value, ")");
}

main() {
    var foo = Foo();
    foo[10] = "hello";
    foo.20 = "hi";
    foo.bar = "hola";
    foo[30] +: 100;
    foo.40 *: 200;
    foo.baz \: 300;
}
