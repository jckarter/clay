import libc.(printf, fprintf, stdout);

record Foo (value:Int);
override RegularRecord?(#Foo) = false;

override Foo() --> x:Foo { printf(cstring("ran ctor\n")); x.value = 123; }
override destroy(x:Foo) { printf(cstring("ran dtor\n")); }

var foo = Foo();

main()
{
    fprintf(stdout, cstring("%d\n"), foo.value);
}
